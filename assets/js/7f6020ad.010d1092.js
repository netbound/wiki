"use strict";(self.webpackChunkalexandria=self.webpackChunkalexandria||[]).push([[808],{857:function(e,n,r){r.r(n),r.d(n,{frontMatter:function(){return u},contentTitle:function(){return l},metadata:function(){return d},toc:function(){return s},default:function(){return c}});var t=r(7462),i=r(3366),a=(r(7294),r(3905)),o=["components"],u={},l="Setting up Wireguard on an EdgeRouter 4",d={unversionedId:"networking/wireguard-er",id:"networking/wireguard-er",isDocsHomePage:!1,title:"Setting up Wireguard on an EdgeRouter 4",description:"Download & Install",source:"@site/docs/networking/wireguard-er.md",sourceDirName:"networking",slug:"/networking/wireguard-er",permalink:"/networking/wireguard-er",editUrl:"https://github.com/facebook/docusaurus/edit/main/website/docs/networking/wireguard-er.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Exteded Berkeley Packet Filter (eBPF)",permalink:"/networking/ebpf"},next:{title:"Ownership and Borrowing",permalink:"/rust/ownership-borrowing"}},s=[{value:"Download &amp; Install",id:"download--install",children:[]},{value:"Configuration",id:"configuration",children:[]}],g={toc:s};function c(e){var n=e.components,r=(0,i.Z)(e,o);return(0,a.kt)("wrapper",(0,t.Z)({},g,r,{components:n,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"setting-up-wireguard-on-an-edgerouter-4"},"Setting up Wireguard on an EdgeRouter 4"),(0,a.kt)("h2",{id:"download--install"},"Download & Install"),(0,a.kt)("p",null,"First we need to install the .deb package for Wireguard. You can find it in the releases of the ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/WireGuard/wireguard-vyatta-ubnt"},"official repository")," (copy the link address to get the right download location)."),(0,a.kt)("p",null,"Download and install with:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"curl -OL https://github.com/WireGuard/wireguard-vyatta-ubnt/releases/download/1.0.20210606-2/e300-v2-v1.0.20210606-v1.0.20210914.deb\n\nsudo dpkg -i e300-v2-v1.0.20210606-v1.0.20210914.deb\n")),(0,a.kt)("h2",{id:"configuration"},"Configuration"),(0,a.kt)("p",null,"Next, configure the ",(0,a.kt)("inlineCode",{parentName:"p"},"wg0")," interface:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"# Generate key pair\nwg genkey | tee /config/auth/wg.key | wg pubkey >  wg.public\n\nconfigure\n\n# Configure interface\nset interfaces wireguard wg0 address 10.0.0.1/24\nset interfaces wireguard wg0 listen-port 51820\nset interfaces wireguard wg0 route-allowed-ips true\n\n# Configure peer\nset interfaces wireguard wg0 peer GIPWDet2eswjz1JphYFb51sh6I+CwvzOoVyD7z7kZVc= endpoint <public_ip>:51820\nset interfaces wireguard wg0 peer GIPWDet2eswjz1JphYFb51sh6I+CwvzOoVyD7z7kZVc= allowed-ips 10.0.0.2/32\n\nset interfaces wireguard wg0 private-key /config/auth/wg.key\n\n# Configure firewall\nset firewall name WAN_LOCAL rule 20 action accept\nset firewall name WAN_LOCAL rule 20 protocol udp\nset firewall name WAN_LOCAL rule 20 description 'WireGuard'\nset firewall name WAN_LOCAL rule 20 destination port 51820\n\ncommit\nsave\nexit\n")),(0,a.kt)("p",null,"You have now succesfully installed Wireguard."))}c.isMDXComponent=!0}}]);