"use strict";(self.webpackChunkalexandria=self.webpackChunkalexandria||[]).push([[808],{857:function(e,n,t){t.r(n),t.d(n,{frontMatter:function(){return u},contentTitle:function(){return d},metadata:function(){return l},toc:function(){return s},default:function(){return c}});var r=t(7462),a=t(3366),i=(t(7294),t(3905)),o=["components"],u={},d="Setting up Wireguard on an EdgeRouter 4",l={unversionedId:"networking/wireguard-er",id:"networking/wireguard-er",isDocsHomePage:!1,title:"Setting up Wireguard on an EdgeRouter 4",description:"Download & Install",source:"@site/docs/networking/wireguard-er.md",sourceDirName:"networking",slug:"/networking/wireguard-er",permalink:"/docs/networking/wireguard-er",editUrl:"https://github.com/facebook/docusaurus/edit/main/website/docs/networking/wireguard-er.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Exteded Berkeley Packet Filter (eBPF)",permalink:"/docs/networking/ebpf"}},s=[{value:"Download &amp; Install",id:"download--install",children:[]},{value:"Configuration",id:"configuration",children:[]}],g={toc:s};function c(e){var n=e.components,t=(0,a.Z)(e,o);return(0,i.kt)("wrapper",(0,r.Z)({},g,t,{components:n,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"setting-up-wireguard-on-an-edgerouter-4"},"Setting up Wireguard on an EdgeRouter 4"),(0,i.kt)("h2",{id:"download--install"},"Download & Install"),(0,i.kt)("p",null,"First we need to install the .deb package for Wireguard. You can find it in the releases of the ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/WireGuard/wireguard-vyatta-ubnt"},"official repository")," (copy the link address to get the right download location)."),(0,i.kt)("p",null,"Download and install with:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"curl -OL https://github.com/WireGuard/wireguard-vyatta-ubnt/releases/download/1.0.20210606-2/e300-v2-v1.0.20210606-v1.0.20210914.deb\n\nsudo dpkg -i e300-v2-v1.0.20210606-v1.0.20210914.deb\n")),(0,i.kt)("h2",{id:"configuration"},"Configuration"),(0,i.kt)("p",null,"Next, configure the ",(0,i.kt)("inlineCode",{parentName:"p"},"wg0")," interface:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"# Generate key pair\nwg genkey | tee /config/auth/wg.key | wg pubkey >  wg.public\n\nconfigure\n\n# Configure interface\nset interfaces wireguard wg0 address 10.0.0.1/24\nset interfaces wireguard wg0 listen-port 51820\nset interfaces wireguard wg0 route-allowed-ips true\n\n# Configure peer\nset interfaces wireguard wg0 peer GIPWDet2eswjz1JphYFb51sh6I+CwvzOoVyD7z7kZVc= endpoint <public_ip>:51820\nset interfaces wireguard wg0 peer GIPWDet2eswjz1JphYFb51sh6I+CwvzOoVyD7z7kZVc= allowed-ips 10.0.0.2/32\n\nset interfaces wireguard wg0 private-key /config/auth/wg.key\n\n# Configure firewall\nset firewall name WAN_LOCAL rule 20 action accept\nset firewall name WAN_LOCAL rule 20 protocol udp\nset firewall name WAN_LOCAL rule 20 description 'WireGuard'\nset firewall name WAN_LOCAL rule 20 destination port 51820\n\ncommit\nsave\nexit\n")),(0,i.kt)("p",null,"You have now succesfully installed Wireguard."))}c.isMDXComponent=!0}}]);